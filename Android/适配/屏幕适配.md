adb shell wm命令可以修改当前设备的 size 、 density 等参数，而这两个参数就是决定了当前设备的显示效果，可用于修改当前设备参数，来模拟目标设备的屏幕参数，方便适配。

## 1.屏幕配置概述
Android可在各种规模的设备上运行，从手机到平板电脑和电视。为了按照屏幕类型对设备进行分类，Android为每个设备定义了两个特征：**屏幕尺寸**（屏幕的物理尺寸）和**屏幕密度**（屏幕上像素的物理密度，即单位面积内的像素数，称为DPI）。为了简化不同的配置，Android将这些变体概括为可以更容易定位的组：
* 四种通用尺寸：small, normal, large, and xlarge
* 几种广义密度：mdpi（中等），hdpi（高），xhdpi（超高），xxhdpi（超高）和其他密度。

默认情况下，您的应用程序与所有屏幕大小和密度兼容，因为系统会根据每个屏幕的需要对UI布局和图像资源进行适当调整。但是，您应该为每种屏幕配置优化用户体验，方法是为不同的屏幕尺寸添加专门的布局，并为常见的屏幕密度添加优化的位图图像。

## 2.屏幕尺寸

屏幕尺寸是系统为您的应用界面提供的可见空间。 您的应用的屏幕尺寸并不是设备的实际屏幕尺寸，而是综合考虑了屏幕方向、系统装饰（如导航栏）和窗口配置更改（例如，当用户启用多窗口模式时）后的尺寸。

对不同屏幕尺寸的适配：
* 灵活布局：避免对位置和大小硬编码，如宽高使用match_parent、布局使用相对布局设定位置等
* 替代布局：对资源文件加尺寸限定符，比如`layout/main.xml`和`layout-large/main.xml`，还有方向限定符，且可以组合使用，如`layout-large-land/`
* 九宫位图

![同一个应用针对不同的屏幕尺寸使用不同的布局](https://developer.android.google.cn/images/screens_support/sizes-phone-tablet_2x.png)

#### 布局别名
在使用替代布局的时候，比如：
* res/layout/main.xml: 单窗格布局
* res/layout-large: 多窗格布局
* res/layout-sw600dp: 多窗格布局

假如后两个布局文件完全相同，为避免维护两个相同文件，可以使用别名文件。例如，您可以定义下列布局：
* res/layout/main.xml，单窗格布局
* res/layout/main_twopanes.xml，双窗格布局

并添加以下两个文件：
* res/values-large/layout.xml：
```
<resources>
    <item name="main" type="layout">@layout/main_twopanes</item>
</resources>
```
* res/values-sw600dp/layout.xml：
```
<resources>
    <item name="main" type="layout">@layout/main_twopanes</item>
</resources>
```
后两个文件内容完全相同，但它们实际上并未定义布局， 而只是将 main 设置为 main_twopanes 的别名。由于这些文件具有 large 和 sw600dp 选择器，因此它们适用于任何 Android 版本的平板电脑和电视（低于 3.2 版本的平板电脑和电视匹配 large，高于 3.2 版本者将匹配 sw600dp）。

此方式也可以用于其他资源文件的别名

## 3.像素密度
像素密度是屏幕上单位面积内的像素数，称为 dpi（每英寸的像素点数）。 它与分辨率不同，后者是屏幕上像素的总数。
![尺寸相同但像素密度不同的两个设备的夸大示例](https://developer.android.google.cn/images/screens_support/densities-phone_2x.png)

如果应用在不同像素密度的屏幕上显示时，保留了界面设计的物理尺寸（从用户角度来看），说明它实现了“不受密度制约”。要实现不受密度制约，可以使用以下方法：

#### 使用密度无关像素
使用像素来定义布局尺寸会带来问题，因为不同的屏幕具有不同的像素密度，因此同样数量的像素在不同设备上可能对应于不同的物理尺寸。因此，在指定尺寸时，请务必使用 dp 或 sp 单位。dp 是一种密度无关像素，对应于 160 dpi 下像素的物理尺寸，所以在 320 dpi下的物理尺寸仍旧一致，但是像素数变多了。sp 是相同的基本单位，但它会按用户首选的文本尺寸进行缩放（属于缩放无关像素）。<br/>

dpi是每英寸的像素点数，比如屏幕分辨率（分辨率实际不是率，而是数量）为：1920*1080，屏幕尺寸为5英寸的话，那么dpi为440。
![](https://mmbiz.qpic.cn/mmbiz_png/5EcwYhllQOgM19n6iawpWQRCfcibxicoBYG0aE9VoUJylxjwZHClXzKeeiadnQyvpLwsyZfES4axmPkmrwZ1jtyibKA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)

* dp = px / density = px / (dpi / 160)
* px = density * dp


#### 提供备用位图
对于图片，如果您的应用仅在中密度 (mdpi) 屏幕上提供位图，则在高密度屏幕上 Android 会将其放大，这样该图像在两种屏幕上会占用大致相同的物理空间。 但是这可能会导致位图中出现明显的缩放失真。 因此，您的应用应该包含更高分辨率的备用位图。

 图片显示像素 =  图片实际像素尺寸 × 机型DPI / 所在资源目录DPI

> &emsp;&emsp;要注意的是，虽然可能会放大或缩小图片的像素，但是显示的物理尺寸是大致相同的，因为图片像素放大变多或缩小变少，正是由于手机的像素密度是对应更大或更小的情况下Android系统主动将其放大缩小，所以视觉大小大致不变。这样设计的目的也正是为了物理空间大致相同，视觉上更正常。<br/>
&emsp;&emsp;这跟使用像素来指定视图宽高的情况正好相反，因为使用像素是固定的尺寸，所以同样的像素，在高密度屏幕上看到的视觉尺寸比低密度屏幕更小，因为高密度屏幕同样物理尺寸下比低密度屏幕有更多的像素点，所以最好使用dp单位。

所以提供各种密度级别的位图资源，有助于您在所有屏幕密度上获得良好的图形质量和性能。
按以下尺寸缩放比例生成每种屏幕密度对应的图像：
* `xhdpi:` 2.0
* `hdpi:` 1.5
* `mdpi:` 1.0（基准）
* `ldpi:` 0.75

这意味着，如果您为 xhdpi 设备生成了一幅 200x200 的图像，则应分别按 150x150、100x100 和 75x75 图像密度为 hdpi 设备、mdpi 设备和 ldpi 设备生成同一资源。

然后，将生成的图片文件置于 res/ 下的相应子目录中，系统将自动根据运行您的应用的设备的屏幕密度选取正确的文件。


## 3.今日头条适配方案
1dp在不同屏幕dpi下，会对应不同的px值，可以应对大多数情况视图尺寸的屏幕适配。但是对于相同dpi，宽高比却不同；或者设计图的宽高dp值与实际屏幕的dp值并不相等的情况下，就不能完全满足适配。所以今日头条适配方案的目标是：
1. 支持以宽或者高一个维度去适配，保持该维度上和设计图一致；
2. 支持dp和sp单位，控制迁移成本到最小。

方案的核心就是根据设计图的宽度或高度，对应屏幕的实际宽度或高度，得到用于适配的新的density，使用新的density并对应更新scaleDensity和densityDpi
[今日头条适配方案](https://mp.weixin.qq.com/s?__biz=MzI1MzYzMjE0MQ==&mid=2247484502&idx=2&sn=a60ea223de4171dd2022bc2c71e09351&scene=21#wechat_redirect)