## 1. 函数重构
* 提炼函数：如果你需要花时间浏览一段代码才能弄清它到底在干什么，那么就应该将其提炼到一个函数中，并根据它所做的事为其命名。但如果一个函数本身就很简单，直接使用函数内的代码更直接，就不必提炼。
* 提炼变量：返回值的表达式复杂，那么应该将表达式分解为多个表达式（或者函数），并分别赋值为一个变量，再用这几个变量的表达式。而简单的表达式应该直接使用，而不要过度拆分。
* 修改函数声明：函数命名和参数列表。
* 相关性大的函数可以考虑单独抽离到一个类中
* 拆分函数：功能单一聚合

## 2. 封装
* 封装为类：将零散的变量、变量的操作封装为类和类里面的函数。也有一个类不再有单独存在的情况，则需要去掉类结构。

## 3 简化逻辑
* 拆分循环：你常常能见到一些身兼多职的循环，它们一次做了两三件事情，不为别的，就因为这样可以只循环一次。但如果你在一次循环中做了两件不同的事，那么每当需要修改循环时，你都得同时理解这两件事情。
这项重构手法可能让许多程序员感到不安，因为它会迫使你执行两次循环。但应该优先进行重构，然后再考虑性能优化。
* 一旦代码不再被使用，我们就该立马删除它。以前，业界对于死代码的处理态度多是注释掉，而现在版本控制系统已经相当普及
* 条件表达式提炼为函数
* 嵌套的if-else可改为if return。有时将条件反向、与运算和或运算的调整可以便于改写
```
fun foo(): Result {
    val result
    if (isA) result = aa
    else {
        if (isB) result = bb
        else {
            if (isC) result = cc
            else result = dd
        }
    }
    return result
}

fun foo(): Result {
    if (isA) return xx
    if (isB) return yy
    if (isC) return cc
    return dd
}
```

## 4. 重构API
* 避免函数的副作用
* 用明确的函数取代参数，减少标记型参数，比如boolean值参数可以改为两个函数来对应true和false

## 5. 继承
* 字段、函数和构造函数如果在子类重复，那么应该移到父类
* 字段、函数如果只和个别子类相关，那么应该放到关心它的子类中
* 以字段取代子类：视情况使用
* 使用组合取代继承：视情况使用